<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>MobaXterm Keygen</title>
    <meta name="description" content="Website created with love by Zarfala" />
    <link rel="icon" href="https://i.imgur.com/FtcF9ZP.png" />
    <link href="./css/pure-min.css?=2" rel="stylesheet" />
    <link href="./css/style.css" rel="stylesheet" />
    <link href="./css/fire.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.js"></script>
    <script>
      tailwind.config = {
        darkMode: "class",
        theme: {
          extend: {
            screens: {
              'xs': '475px',
            },
            colors: {
              primary: {
                50: '#eef2ff',
                100: '#e0e7ff',
                500: '#6366f1',
                600: '#4f46e5',
                700: '#4338ca',
              }
            },
            animation: {
              'pulse-slow': 'pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite',
            }
          }
        }
      }
    </script>
    <!-- Meta tags for better SEO and sharing -->
    <meta property="og:title" content="MobaXterm Keygen" />
    <meta property="og:type" content="website" />
    <meta property="og:description" content="Website created with love by Zarfala" />
    <meta property="og:image" content="https://i.imgur.com/FtcF9ZP.png" />
    <meta property="og:site_name" content="MobaXterm Keygen" />
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="MobaXterm Keygen">
    <meta name="twitter:description" content="Website created with love by Zarfala">
    <meta name="twitter:image" content="https://i.imgur.com/FtcF9ZP.png">
  </head>
  <body class="transition-colors duration-300">
    <main>
      <div class="relative flex min-h-screen flex-col items-center justify-center bg-white dark:bg-black transition-colors duration-300 overflow-hidden px-4">
        <!-- Background effect -->
        <div class="flex inset-0 overflow-hidden">
          <div class="jumbo absolute opacity-60"></div>
        </div>
        <div class="box-main w-full max-w-xl mx-auto">
          <div id="app" class="relative z-10 p-6 sm:p-10 w-full text-left shadow-lg rounded-xl bg-white dark:bg-slate-900/80 dark:backdrop-blur dark:ring-1 dark:ring-inset dark:ring-white/10 transition-all duration-300">
            <!-- Header Section -->
            <header class="mb-8 text-center">
              <h1 class="relative flex flex-col xs:flex-row items-center justify-center text-4xl sm:text-5xl font-bold text-gray-800 dark:text-white dark:opacity-95 transition-colors">
                <span>MobaXterm</span>
                <span class="mt-2 xs:mt-0 xs:ml-2 rounded-xl bg-current p-2 text-[0.7em] leading-none">
                  <span class="text-white dark:text-black">Keygen</span>
                </span>
              </h1>
              <!-- Version Badge -->
              <div class="mt-4 inline-flex items-center px-3 py-1 rounded-full bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 text-sm font-medium text-white"> Compatible with versions 20.X, 25.1 and 25.2 </div>
              <!-- Theme Toggle -->
              <div class="mt-4">
                <button onclick="toggleTheme()" class="px-3 py-1 border border-stone-200 rounded-full drop-shadow-sm text-sm text-stone-800 dark:text-white bg-white/40 dark:bg-black/40 backdrop-blur-lg hover:border-stone-300 transition-colors dark:border-stone-500 dark:hover:border-stone-400"> Toggle Theme </button>
              </div>
            </header>
            <!-- Form Section -->
            <form @submit.prevent="validateAndGenerate">
              <div class="space-y-6">
                <div>
                  <label for="licenseType" class="block text-lg text-gray-700 dark:text-gray-300">Edition:</label>
                  <select name="licenseType" id="licenseType" v-model="licenseType" class="w-full mt-1 p-2 rounded-lg border border-gray-300 dark:border-gray-600 dark:bg-slate-800 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent outline-none transition-colors">
                    <option value="" disabled>Select an option</option>
                    <option v-for="(val, key) in LICENSE_TYPES" :value="val">{{key}}</option>
                  </select>
                  <p v-if="errors.licenseType" class="mt-1 text-red-500 text-sm">{{ errors.licenseType }}</p>
                </div>
                <div>
                  <label for="userName" class="block text-lg text-gray-700 dark:text-gray-300">Username:</label>
                  <div class="relative">
                    <input type="text" id="userName" v-model="userName" @input="validateUserName" placeholder="Example defaultUser" class="w-full mt-1 p-2 rounded-lg border border-gray-300 dark:border-gray-600 dark:bg-slate-800 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent outline-none transition-colors" />
                    <p v-if="errors.userName" class="mt-1 text-red-500 text-sm">{{ errors.userName }}</p>
                  </div>
                </div>
                <div>
                  <label for="versionName" class="block text-lg text-gray-700 dark:text-gray-300">Version:</label>
                  <div class="relative">
                    <input type="text" id="versionName" v-model="versionName" @input="validateVersion" placeholder="Example 25.2" class="w-full mt-1 p-2 rounded-lg border border-gray-300 dark:border-gray-600 dark:bg-slate-800 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent outline-none transition-colors" />
                    <p v-if="errors.versionName" class="mt-1 text-red-500 text-sm">{{ errors.versionName }}</p>
                  </div>
                </div>
                <div>
                  <label for="userNum" class="block text-lg text-gray-700 dark:text-gray-300">Number of users:</label>
                  <div class="relative">
                    <input type="number" id="userNum" v-model="userNum" @input="validateUserNum" placeholder="Example 1" min="1" class="w-full mt-1 p-2 rounded-lg border border-gray-300 dark:border-gray-600 dark:bg-slate-800 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent outline-none transition-colors" />
                    <p v-if="errors.userNum" class="mt-1 text-red-500 text-sm">{{ errors.userNum }}</p>
                  </div>
                </div>
                <!-- Download Button -->
                <div class="text-center pt-4">
                  <button type="submit" class="w-full sm:w-auto px-6 py-3 bg-primary-600 text-white rounded-lg shadow-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 transition-colors duration-200"> Download Key </button>
                </div>
              </div>
            </form>
            <!-- Footer -->
            <footer class="mt-8 pt-6 border-t border-slate-200 dark:border-slate-700">
              <div class="flex flex-col items-center space-y-4">
                <div class="flex items-center space-x-2">
                  <span class="text-sm text-slate-600 dark:text-slate-400">Created with</span>
                  <span class="animate-pulse text-red-500">❤</span>
                  <span class="text-sm text-slate-600 dark:text-slate-400">by</span>
                  <span class="text-sm font-semibold bg-clip-text text-transparent bg-gradient-to-r from-purple-500 to-pink-500"> Zarfala </span>
                </div>
                <p class="text-sm text-slate-600 dark:text-slate-400" style="margin-top: 0;"> UI/UX Design optimized for <span class="inline-block">
                    <span class="text-blue-500 font-semibold">Computer</span>
                    <span class="text-green-500 font-semibold">& Mobile</span>
                  </span>
                </p>
                <div class="text-xs text-slate-500 dark:text-slate-500" style="margin-top: 5px;"> v2.2 © 2025 All rights reserved </div>
              </div>
            </footer>
          </div>
        </div>
      </div>
      <!-- Toast notification -->
      <div id="toast" class="fixed bottom-4 right-4 px-4 py-2 rounded-lg bg-green-500 text-white transform translate-y-16 opacity-0 transition-all duration-300 z-50 hidden">
        License generated successfully!
      </div>
      <!-- Scripts -->
      <script src="./js/vue.min-2.6.12.js"></script>
      <script src="./js/FileSaver.js"></script>
      <script src="./js/jszip.js"></script>
      <script src="./js/fire.js"></script>
      <script src="./js/alert.js"></script>
      <script>
        // Theme toggle functionality
        function toggleTheme() {
          if (document.documentElement.classList.contains('dark')) {
            document.documentElement.classList.remove('dark');
            localStorage.theme = 'light';
          } else {
            document.documentElement.classList.add('dark');
            localStorage.theme = 'dark';
          }
        }
        
        // Check for saved theme preference or prefer-color-scheme
        if (localStorage.theme === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
          document.documentElement.classList.add('dark');
        } else {
          document.documentElement.classList.remove('dark');
        }
        
        // Toast notification function
        function showToast(message, type = 'success') {
          const toast = document.getElementById('toast');
          toast.textContent = message;
          toast.classList.remove('hidden');
          
          if (type === 'success') {
            toast.classList.add('bg-green-500');
            toast.classList.remove('bg-red-500');
          } else {
            toast.classList.add('bg-red-500');
            toast.classList.remove('bg-green-500');
          }
          
          setTimeout(() => {
            toast.classList.remove('translate-y-16', 'opacity-0');
          }, 100);
          
          setTimeout(() => {
            toast.classList.add('translate-y-16', 'opacity-0');
            setTimeout(() => {
              toast.classList.add('hidden');
            }, 300);
          }, 3000);
        }
      </script>
      <script type="module">
        import {
          LicenseType,
          generateLicense
        } from './js/mobaXtermGenerater.js'
        
        new Vue({
          el: '#app',
          data() {
            return {
              LICENSE_TYPES: LicenseType,
              licenseType: '',
              userName: '',
              versionName: '',
              userNum: '',
              errors: {
                licenseType: '',
                userName: '',
                versionName: '',
                userNum: ''
              }
            }
          },
          methods: {
            validateLicenseType() {
              if (!this.licenseType) {
                this.errors.licenseType = 'Please select an edition';
                return false;
              }
              this.errors.licenseType = '';
              return true;
            },
            validateUserName() {
              if (!this.userName) {
                this.errors.userName = 'Username is required';
                return false;
              }
              
              const regex = /^[a-zA-Z]+$/;
              if (!regex.test(this.userName)) {
                this.errors.userName = 'Only letters are allowed (no spaces, numbers or special characters)';
                return false;
              }
              this.errors.userName = '';
              return true;
            },
            validateVersion() {
              if (!this.versionName) {
                this.errors.versionName = 'Version is required';
                return false;
              }
              
              const regex = /^[1-9][0-9]*\.?\d{0,1}$/;
              if (!regex.test(this.versionName)) {
                this.errors.versionName = 'Enter a valid version format (e.g., 25.2)';
                return false;
              }
              
              // Check if version is supported
              const majorVersion = parseInt(this.versionName.split('.')[0]);
              if (majorVersion !== 20 && majorVersion !== 25) {
                this.errors.versionName = 'Currently only versions 20.X and 25.X are supported';
                return false;
              }
              
              this.errors.versionName = '';
              return true;
            },
            validateUserNum() {
              if (!this.userNum) {
                this.errors.userNum = 'Number of users is required';
                return false;
              }
              
              const regex = /^[1-9]+\d*$/;
              if (!regex.test(this.userNum)) {
                this.errors.userNum = 'Enter a valid number greater than 0';
                return false;
              }
              this.errors.userNum = '';
              return true;
            },
            validateAndGenerate() {
              // Validate all fields
              const isLicenseTypeValid = this.validateLicenseType();
              const isUserNameValid = this.validateUserName();
              const isVersionValid = this.validateVersion();
              const isUserNumValid = this.validateUserNum();
              
              // Only generate if all validations pass
              if (isLicenseTypeValid && isUserNameValid && isVersionValid && isUserNumValid) {
                try {
                  let versionNameArr = this.versionName.split('.');
                  const majorVersion = parseInt(versionNameArr[0]);
                  const minorVersion = versionNameArr.length === 2 ? (parseInt(versionNameArr[1]) || 0) : 0;
                  
                  let licenseStr = generateLicense(this.licenseType, this.userName, this.userNum, majorVersion, minorVersion);
                  this.generateLicenseFile(licenseStr);
                  showToast('License generated successfully!', 'success');
                } catch (error) {
                  console.error('Error generating license:', error);
                  showToast('Error generating license. Please try again.', 'error');
                }
              }
            },
            generateLicenseFile(licenseStr) {
              let zip = new JSZip();
              zip.file("Pro.key", licenseStr);
              zip.generateAsync({
                type: "blob"
              }).then(function(content) {
                saveAs(content, "Custom.mxtpro");
              }).catch(function(error) {
                console.error('Error creating zip file:', error);
                showToast('Error creating license file. Please try again.', 'error');
              });
            }
          },
          mounted() {
            // Set default version to 25.2
            this.versionName = '25.2';
          }
        });
      </script>
  </body>
</html>
